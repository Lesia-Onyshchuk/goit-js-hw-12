{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default function markup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        tags,\n        largeImageURL,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"li-item\">\n             <a class=\"gallery-link\" href=\"${largeImageURL}\">\n               <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"300\">\n             </a>\n               <ul class=\"image-description\">\n               <li>\n                 <h2 class=\"title\">Likes</h2>\n                 <p>${likes}</p>\n               </li>\n               <li>\n               <h2 class=\"title\">Views</h2>\n               <p>${views}</p>\n               </li>\n               <li>\n                 <h2 class=\"title\">Comments</h2>\n                 <p>${comments}</p>\n               </li>\n               <li>\n                 <h2 class=\"title\">Downloads</h2>\n                 <p>${downloads}</p>\n               </li>\n               </ul>\n       </li>`\n    )\n    .join('');\n}\n","import 'izitoast/dist/css/iziToast.min.css';\n\nimport axios from 'axios';\n\nconst API_KEY = '47418374-a80c993bb5abb784419bb47e5';\n\nexport const fetchFoo = async (info, page = 1) => {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: info,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 200,\n    page: page,\n  });\n\n  const response = await axios.get(\n    `https://pixabay.com/api/?key=${API_KEY}&q=${params}`\n  );\n  return response.data;\n};\n","import './css/loader.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport markup from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchFoo } from './js/pixabay-api.js';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-more');\n\nlet lightbox = new SimpleLightbox('.gallery .gallery-link', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nloadBtn.setAttribute('hidden', true);\nloadBtn.style.display = 'none';\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nexport function hideLoader() {\n  loader.style.display = 'none';\n}\n\nlet value = '';\nlet currentPage = 1;\nlet perPage = 200;\n\ndocument.addEventListener('DOMContentLoaded', reloadFoo);\n\nfunction reloadFoo() {\n  loadBtn.hidden = true;\n  loadBtn.style.display = 'none';\n}\n\nif (!form.dataset.listenerAdded) {\n  form.addEventListener('submit', event => {\n    event.preventDefault();\n\n    loadBtn.setAttribute('hidden', true);\n\n    const input = event.target.elements.search;\n    value = input.value.trim();\n\n    showLoader();\n\n    if (!value) {\n      iziToast.warning({\n        title: 'Warning',\n        message: 'Please enter a search query!',\n        position: 'topRight',\n        backgroundColor: '#f39c12',\n        messageColor: '#ffffff',\n        messageSize: '16px',\n        titleColor: '#ffffff',\n      });\n\n      gallery.innerHTML = '';\n      hideLoader();\n      return;\n    } else {\n      showLoader();\n      fetchFoo(value)\n        .then(data => {\n          if (data.hits.length < perPage) {\n            loadBtn.setAttribute('hidden', true);\n          }\n          if (data.hits.length === 0) {\n            loadBtn.setAttribute('hidden', true);\n            iziToast.error({\n              title: 'Error',\n              message:\n                'Sorry, there are no images matching your search query. Please try again!',\n              position: 'topRight',\n              backgroundColor: '#ef4040',\n              messageColor: '#ffffff',\n              messageSize: '16px',\n              titleColor: '#ffffff',\n            });\n          }\n          gallery.innerHTML = '';\n\n          gallery.insertAdjacentHTML('beforeend', markup(data.hits));\n\n          lightbox.refresh();\n        })\n        .catch(error => {\n          iziToast.error({\n            title: 'Error',\n            message: `An error occurred: ${error.message}`,\n            position: 'topRight',\n            backgroundColor: '#ef4040',\n            messageColor: '#ffffff',\n            messageSize: '16px',\n            titleColor: '#ffffff',\n          });\n        })\n        .finally(() => {\n          hideLoader();\n        });\n\n      loadBtn.removeAttribute('hidden');\n    }\n\n    form.reset();\n    return value;\n  });\n\n  form.dataset.listenerAdded = true;\n}\n\nloadBtn.addEventListener('click', async () => {\n  currentPage += 1;\n\n  try {\n    const posts = await fetchFoo(value, currentPage);\n    const totalPages = Math.ceil(posts.totalHits / perPage);\n    gallery.insertAdjacentHTML('beforeend', markup(posts.hits));\n\n    if (currentPage >= totalPages) {\n      loadBtn.hidden = true;\n      return iziToast.error({\n        title: 'Warning',\n        message: \"We're sorry, there are no more posts to load\",\n        position: 'topRight',\n        backgroundColor: '#f39c12',\n        messageColor: '#ffffff',\n        messageSize: '16px',\n        titleColor: '#ffffff',\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  }\n});\n"],"names":["markup","arr","webformatURL","tags","largeImageURL","likes","views","comments","downloads","API_KEY","fetchFoo","info","page","params","axios","form","gallery","loadBtn","lightbox","SimpleLightbox","showLoader","hideLoader","value","currentPage","perPage","reloadFoo","event","data","iziToast","error","posts","totalPages"],"mappings":"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"}